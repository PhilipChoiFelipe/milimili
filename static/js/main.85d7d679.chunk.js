(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{107:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),i=a(19),s=a.n(i),o=(a(58),a(9)),c=a(10),l=a(12),m=a(11),d=a(13),u=(a(60),a(22),a(63),a(20),a(115)),h=a(116),p=a(117),f=a(114),v=a(118),y=a(121),b=a(122),g=a(119),E=a(31),k=a(28),N=a.n(k),C=a(5),O=a.n(C),j=(a(25),a(15)),w=a(120),S=a(109),D=a(110),x=a(111),U=a(123),I=a(112),M=a(113),T=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(m.a)(t).call(this,e))).state={email:void 0,password:void 0,dropdownOpen:!1,handle:"\uc2e0\ubd84\uc744 \uc815\ud574\uc8fc\uc138\uc694",signUpmodal:!1,signInmodal:!1},a.toggle=a.toggle.bind(Object(j.a)(Object(j.a)(a))),a.modalToggle=a.modalToggle.bind(Object(j.a)(Object(j.a)(a))),a.InmodalToggle=a.InmodalToggle.bind(Object(j.a)(Object(j.a)(a))),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"handleChange",value:function(e){var t=e.target.name,a=e.target.value,n={};n[t]=a,this.setState(n)}},{key:"handleSignUp",value:function(e){e.preventDefault(),"\uc2e0\ubd84\uc744 \uc815\ud574\uc8fc\uc138\uc694"===this.state.handle?alert("\uc2e0\ubd84\uc744 \uc815\ud574\uc8fc\uc138\uc694!"):this.props.signUpCallback(this.state.email,this.state.password,this.state.handle)}},{key:"handleSignIn",value:function(e){e.preventDefault(),this.props.signInCallback(this.state.email,this.state.password)}},{key:"handleType",value:function(e){console.log(e.currentTarget.textContent),this.setState({handle:e.currentTarget.textContent})}},{key:"toggle",value:function(){this.setState(function(e){return{dropdownOpen:!e.dropdownOpen}})}},{key:"InmodalToggle",value:function(){this.setState({signInmodal:!this.state.signInmodal})}},{key:"modalToggle",value:function(){this.setState({signUpmodal:!this.state.signUpmodal})}},{key:"buttonChange",value:function(e){this.setState({btnName:"hi"})}},{key:"render",value:function(){var e=this;return r.a.createElement("form",null,r.a.createElement("div",{className:"form-group text-center mt-5"},r.a.createElement("button",{className:"btn",onClick:this.InmodalToggle},"\ub85c\uadf8\uc778"),r.a.createElement("button",{id:"signupButton",className:"btn ml-4",onClick:this.modalToggle},"\ud68c\uc6d0\uac00\uc785"),r.a.createElement(w.a,{isOpen:this.state.signInmodal,toggle:this.InmodalToggle,className:"modal-dialog-centered"},r.a.createElement(S.a,{toggle:this.InmodalToggle},"MiliMili"),r.a.createElement(D.a,null,r.a.createElement("form",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"email"},"\uc544\uc774\ub514"),r.a.createElement("input",{className:"form-control",placeholder:"\uc774\uba54\uc77c\ud615\uc2dd",id:"email",type:"email",name:"email",onChange:function(t){return e.handleChange(t)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password"},"\ube44\ubc00\ubc88\ud638"),r.a.createElement("input",{className:"form-control",id:"password",type:"password",name:"password",onChange:function(t){return e.handleChange(t)}})),r.a.createElement("div",{className:"form-group text-right"},r.a.createElement("button",{className:"btn btn-primary",onClick:function(t){return e.handleSignIn(t)}},"\ub85c\uadf8\uc778"))))),r.a.createElement(w.a,{isOpen:this.state.signUpmodal,toggle:this.modalToggle,className:"modal-dialog-centered"},r.a.createElement(S.a,{toggle:this.modalToggle},"MiliMili"),r.a.createElement(D.a,null,r.a.createElement("form",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"email"},"\uc544\uc774\ub514"),r.a.createElement("input",{className:"form-control",placeholder:"\uc774\uba54\uc77c\ud615\uc2dd",id:"email",type:"email",name:"email",onChange:function(t){return e.handleChange(t)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password"},"\ube44\ubc00\ubc88\ud638"),r.a.createElement("input",{className:"form-control",id:"password",type:"password",name:"password",onChange:function(t){return e.handleChange(t)}})),r.a.createElement("div",{className:"form-group text-right"},r.a.createElement(x.a,{isOpen:this.state.dropdownOpen,toggle:this.toggle,className:"d-inline mr-2",onChange:this.buttonChange},r.a.createElement(U.a,{caret:!0,color:"primary"},this.state.handle),r.a.createElement(I.a,null,r.a.createElement(M.a,{onClick:function(t){return e.handleType(t)}},"\ubbf8\ud544"),r.a.createElement(M.a,{onClick:function(t){return e.handleType(t)}},"\uad70\ud544"),r.a.createElement(M.a,{onClick:function(t){return e.handleType(t)}},"\uc804\uc5ed"),r.a.createElement(M.a,{onClick:function(t){return e.handleType(t)}},"others"))),r.a.createElement("button",{id:"signupButton1",className:"btn btn-primary",onClick:function(t){return e.handleSignUp(t)}},"\ud68c\uc6d0\uac00\uc785")))))))}}]),t}(n.Component),V=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(m.a)(t).call(this,e))).updateComment=function(e){e.preventDefault(),a.setState({comment:e.target.value})},a.onCommentSubmit=function(e){if(e.preventDefault(),0===a.state.comment.length)alert("\ub313\uae00\uc744 \uc801\uc5b4\uc8fc\uc138\uc694!");else if(a.state.comment.length>350)alert("\ub313\uae00\uc740 350\uc790 \uc774\ub0b4\ub85c \uc368\uc8fc\uc138\uc694!");else{var t=a.getRandomColor();O.a.database().ref("shared/diaries/").child(a.props.diary.key).child("comments").on("value",function(e){for(var n in e.val())e.exists&&e.val()[n].userID===a.props.currentUser.uid&&(t=e.val()[n].color)});var n={userID:a.props.currentUser.uid,text:a.state.comment,time:O.a.database.ServerValue.TIMESTAMP,color:t,displayName:a.props.currentUser.displayName},r={};if(O.a.database().ref("shared/diaries/").child(a.props.keyValue).child("comments").on("value",function(e){if(e.exists()){var t=Object.keys(e.val());r=t.map(function(t){var a={};return"notification"!==t&&(a=e.val()[t].userID),a})}}),console.log(N.a.isEmpty(r)),!N.a.isEmpty(r)){var i=r.filter(function(e,t,a){return a.indexOf(e)===t}),s=i.indexOf(a.props.currentUser.uid);-1!==s&&i.splice(s,1);var o=i.indexOf(a.props.diary.userID);-1!==o&&i.splice(o,1),a.props.notifyCommentUser(i,a.props.diary,a.props.keyValue)}O.a.database().ref("shared/diaries/").child(a.props.diary.key).child("comments").push(n),a.setState({comment:""}),n.userID!==a.props.diary.userID&&a.props.notifyUser(n,a.props.diary,a.props.keyValue)}},a.state={comment:""},a.updateComment=a.updateComment.bind(Object(j.a)(Object(j.a)(a))),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"getRandomColor",value:function(){for(var e="BCDEF".split(""),t="#",a=0;a<6;a++)t+=e[Math.floor(Math.random()*e.length)];return t}},{key:"render",value:function(){return r.a.createElement("div",{className:"text-center"},r.a.createElement("div",{id:"commentTextArea",className:"container"},r.a.createElement("form",{className:"commentForm",onSubmit:this.onCommentSubmit},r.a.createElement("div",{className:"input-group"},r.a.createElement("textarea",{className:"form-control",value:this.state.comment,id:"textarea",name:"text",rows:"2",cols:"80",type:"text",placeholder:"\ud560\ub9d0..",onChange:this.updateComment}),r.a.createElement("span",{className:"input-group-btn"},r.a.createElement("button",{type:"submit",className:"btn btn-light ml-1",style:{height:"60px"}},"\uc785\ub825"))))))}}]),t}(n.Component),A=(a(87),a(90),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(m.a)(t).call(this,e))).removeComment=function(e){window.confirm("\uc815\ub9d0\ub85c \uc9c0\uc6b0\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")&&O.a.database().ref("shared/diaries/").child(a.props.diary.key).child("comments").child(e).remove()},a.state={comments:[],pageCount:""},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;O.a.database().ref("shared/diaries/").child(this.props.keyValue).child("comments").on("value",function(t){t.exists()&&e.setState({comments:t.val()})})}},{key:"render",value:function(){var e=this,t="";this.state.comments!==[]&&(t=Object.keys(this.state.comments).map(function(t){var a=e.state.comments[t];return a.id=t,a}).map(function(t){return r.a.createElement(B,{removeComment:e.removeComment,key:t.id,comment:t,currentUser:e.props.currentUser,diary:e.props.diary})}));return r.a.createElement("div",{id:"commentListBox",className:"container-fluid py-3 mt-5",style:{width:"85%",maxHeight:"600px",overflow:"scroll"}},t)}}]),t}(n.Component)),B=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).removeComment=function(){a.props.removeComment(a.props.comment.id)},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.comment,t=r.a.createElement("div",null),a=r.a.createElement("div",null);return this.props.comment.userID===this.props.currentUser.uid&&(a=r.a.createElement("div",{className:"col-12 col-sm-12",id:"removeComment"},r.a.createElement("button",{id:"oneCommentIn",onClick:this.removeComment,className:"btn"},"x"))),t=this.props.comment.userID!==this.props.diary.userID?r.a.createElement("div",{className:"container mb-3",id:"commentContainerOther"},r.a.createElement("div",{className:"row p-3 py-2 border",id:"oneComment",style:{backgroundColor:this.props.comment.color}},r.a.createElement("div",{className:"col-lg-2 col-md-3 col-sm-12"},r.a.createElement("p",{id:"oneCommentIn"},this.props.comment.displayName)),r.a.createElement("div",{className:"col ml-2 pl-4 pl-lg-1 align-center"},e.text),a)):r.a.createElement("div",{className:"container mb-3",id:"commentContainerOwn"},r.a.createElement("div",{className:"row p-3 py-2 bg-white border",id:"ownComment"},r.a.createElement("div",{className:"col-lg-2 col-md-3"},r.a.createElement("p",{id:"oneCommentIn"},this.props.comment.displayName)),r.a.createElement("div",{className:"col pl-4 pl-lg-1"},r.a.createElement("div",{id:"commentBox"},e.text)),a)),r.a.createElement("div",null,t)}}]),t}(n.Component),R=A,z=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(m.a)(t).call(this,e))).sharedRemovedHanler=function(e){e.preventDefault(),window.confirm("\uacf5\uc720\ub41c \uac8c\uc2dc\ubb3c\uc744 \uc815\ub9d0\ub85c \uc9c0\uc6b0\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")&&a.props.removeMySharedDiary(a.state.diary.key)},a.state={redirect:!1,diary:""},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;O.a.database().ref("shared/diaries").child(this.props.match.params.keySeconds).on("value",function(t){e.setState({diary:t.val()})})}},{key:"render",value:function(){this.state.redirect&&window.location.reload();var e=r.a.createElement("div",null);null!==this.state.diary&&(e=r.a.createElement("div",{className:"container text-center mt-4"},r.a.createElement("div",{className:"jumbotron",style:{backgroundColor:"white"}},r.a.createElement("h1",{id:"diaryTitle",className:"display-4"},this.state.diary.title),r.a.createElement("p",{id:"diaryText",className:"lead"},this.state.diary.diary),r.a.createElement("p",{className:"lead"}))));var t=r.a.createElement("div",null);return t=null!==this.state.diary&&"undefined"!==typeof this.state.diary?this.state.diary.userID===this.props.currentUser.uid?r.a.createElement("div",null,r.a.createElement(V,{keyValue:this.props.match.params.keySeconds,currentUser:this.props.currentUser,diary:this.state.diary,notifyCommentUser:this.props.notifyCommentUser}),r.a.createElement(R,{keyValue:this.props.match.params.keySeconds,currentUser:this.props.currentUser,diary:this.state.diary}),r.a.createElement("div",{className:"text-center"},r.a.createElement("button",{type:"submit",className:"btn btn-danger m-3",onClick:this.sharedRemovedHanler},"\uc0ad\uc81c\ud558\uae30"))):r.a.createElement("div",null,r.a.createElement(V,{keyValue:this.props.match.params.keySeconds,notifyCommentUser:this.props.notifyCommentUser,notifyUser:this.props.notifyUser,currentUser:this.props.currentUser,diary:this.state.diary}),r.a.createElement(R,{keyValue:this.props.match.params.keySeconds,currentUser:this.props.currentUser,diary:this.state.diary})):r.a.createElement("p",{className:"text-center lead display-4 m-5"},"\uc874\uc7ac\ud558\uc9c0\uc54a\ub294 \uc77c\uae30\uc785\ub2c8\ub2e4"),r.a.createElement("div",null,e,t)}}]),t}(n.Component),F=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(m.a)(t).call(this,e))).submitHandler=function(e){e.preventDefault(),window.confirm("\uc815\ub9d0\ub85c \uc9c0\uc6b0\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")&&a.props.removeDiary(a.props.match.params.keySeconds)},a.savedHandler=function(e){e.preventDefault(),window.confirm("\uacf5\uc720\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")&&a.props.shareDiary(a.state.diary)},a.state={redirect:!1,diary:""},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=O.a.database().ref("/diaries").child(this.props.currentUser.uid).child(this.props.match.params.keySeconds);t.child("key").on("value",function(a){a.exists()||t.child("key").set(e.props.match.params.keySeconds)}),t.on("value",function(t){e.setState({diary:t.val()})})}},{key:"render",value:function(){var e=r.a.createElement("div",null);return e=r.a.createElement("div",{className:"text-center"},r.a.createElement("button",{type:"submit",className:"btn btn-info",onClick:this.savedHandler},"\uacf5\uc720\ud558\uae30"),r.a.createElement("button",{type:"submit",className:"btn btn-danger m-3",onClick:this.submitHandler},"\uc0ad\uc81c\ud558\uae30")),r.a.createElement("div",null,r.a.createElement("div",{className:"container text-center mt-4"},r.a.createElement("div",{className:"jumbotron",style:{backgroundColor:"white"}},r.a.createElement("h1",{id:"diaryTitle",className:"display-4"},this.state.diary.title),r.a.createElement("p",{id:"diaryText",className:"lead"},this.state.diary.diary),r.a.createElement("p",{className:"lead"}))),e)}}]),t}(n.Component),L=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(m.a)(t).call(this,e))).state={redirect:!1,clickedDiary:""},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"handleClick",value:function(e){this.setState({redirect:!0,clickedDiary:e})}},{key:"render",value:function(){var e=this,t=this.props.diaries.map(function(e){return{value:e.title,count:Math.round(20*Math.random()),diary:e.diary,date:e.date,key:e.id,id:e.id,userID:e.userID}});return this.state.redirect?r.a.createElement(g.a,{push:!0,to:{pathname:"/OwnChosenDiary/"+this.state.clickedDiary.id}}):r.a.createElement("div",null,r.a.createElement("div",{className:"container mt-4",id:"wordCloud"},r.a.createElement(E.TagCloud,{className:"text-center",id:"tagCloud",minSize:30,maxSize:60,tags:t,onClick:function(t){return e.handleClick(t)},shuffle:!1})))}}]),t}(n.Component),H=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(m.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault();var t=new Date;0===a.state.textValue.length||0===a.state.title.length?alert("\uc81c\ubaa9/\ub0b4\uc6a9\uc744 \uc368\uc8fc\uc138\uc694!"):a.state.title.length>20?alert("\uc81c\ubaa9\uc740 20\uc790 \uc774\ub0b4\ub85c \uc4f0\uc154\uc57c\ud569\ub2c8\ub2e4"):a.state.textValue.length>2e3?alert("\uae00\uc740 2000\uc790 \uc774\ub0b4\ub85c \uc368\uc8fc\uc138\uc694"):window.confirm("\ub0b4 \uc77c\uae30\uc7a5\uc5d0 \uc800\uc7a5\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")&&(a.props.textUpdate(a.state.textValue,t.getMilliseconds(),a.state.title),a.setState({textValue:"",title:""}))},a.handleChange=function(e){a.setState({textValue:e.target.value})},a.titleChange=function(e){a.setState({title:e.target.value})},a.state={textValue:"",title:""},a.handleSubmit=a.handleSubmit.bind(Object(j.a)(Object(j.a)(a))),a.handleChange=a.handleChange.bind(Object(j.a)(Object(j.a)(a))),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"container text-center"},r.a.createElement("form",{className:"myForm mt-5",onSubmit:this.handleSubmit},r.a.createElement("input",{value:this.state.title,className:"mb-3 p-2",size:"71",id:"title",type:"text",placeholder:"\uc81c\ubaa9",onChange:this.titleChange}),r.a.createElement("div",{className:"form"},r.a.createElement("textarea",{value:this.state.textValue,className:"p-2",id:"textarea",type:"text",rows:"20",cols:"70",placeholder:"\uc624\ub298\ud558\ub8e8\ub294 \uc5b4\ub5a0\uc168\ub098\uc694?",onChange:this.handleChange})),r.a.createElement("button",{type:"submit",className:"btn btn-warning btn-lg mt-3 mb-3"},"\uc81c\ucd9c"))),r.a.createElement("div",{id:"footer",className:"mt-5 pb-2"},r.a.createElement("p",{className:"lead mt-1 ml-3",style:{fontSize:"0.9em",color:"#B09273"}},"Copyright (c) \ucd5c\ubbfc\uc11d All Right Reserved.",r.a.createElement("br",null),"contact: mschoi16@uw.edu")))}}]),t}(n.Component),W=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(m.a)(t).call(this,e))).state={redirect:!1,clickedDiary:""},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"handleClick",value:function(e){this.setState({redirect:!0,clickedDiary:e})}},{key:"render",value:function(){var e=this;if(this.state.redirect)return r.a.createElement(g.a,{push:!0,to:"/ChosenDiary/"+this.state.clickedDiary.key});var t=[];return"undefined"!==typeof this.props.sharedDiaries&&(t=this.props.sharedDiaries.map(function(e){return{value:e.title,count:20*Math.random(),diary:e.diary,date:e.date,key:e.key,userID:e.userID,shared:!0,id:e.key}})),r.a.createElement("div",null,r.a.createElement("div",{className:"container mt-4",id:"wordCloud"},r.a.createElement(E.TagCloud,{className:"text-center",id:"tagCloud",minSize:30,maxSize:60,tags:t,onClick:function(t){return e.handleClick(t)}})))}}]),t}(n.Component),K=a(29),P=(a(108),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(m.a)(t).call(this,e))).notifyUser=function(e,t,a){var n=O.a.database().ref("diaries/".concat(t.userID)),r={commenterID:e.userID,writerID:t.userID,commentText:e.text,diaryKey:a,title:t.title};n.child("notification").child(a).push(r),n.child("notification").on("value",function(e){console.log("commented!:"),console.log(e.val())})},a.notifyCommentUser=function(e,t,a){for(var n=0;n<e.length;n++)console.log(e),console.log(a),O.a.database().ref("diaries/".concat(e[n])).child("CommentNotification").child(a).push(a)},a.textUpdate=function(e,t,n){var r=a.state.user,i={userID:r.uid,time:O.a.database.ServerValue.TIMESTAMP,diary:e,title:n,date:t,displayName:r.displayName,shared:!1};O.a.database().ref("diaries/".concat(r.uid)).push(i)},a.shareDiary=function(e){var t=O.a.database().ref("diaries/".concat(a.state.user.uid)),n=!1;O.a.database().ref("shared/diaries").on("value",function(t){for(var a in t.val())e.key===a&&(n=!0)}),!1===n?(O.a.database().ref("shared/diaries/").child(e.key).set(e),t.child(e.key).child("shared").set(!0)):alert("\uc774\ubbf8 \uacf5\uc720\ud558\uc2e0 \uac8c\uc2dc\ubb3c\uc785\ub2c8\ub2e4!")},a.removeMySharedDiary=function(e){O.a.database().ref("shared/diaries").child(e).remove()},a.removeDiary=function(e){O.a.database().ref("diaries/".concat(a.state.user.uid)).child(e).remove()},a.clickUpdate=function(e){a.setState({clickedDiary:e})},a.clickLogIn=function(){a.setState({clickedLogIn:!0})},a.state={diaries:[],sharedDiaries:[],clickedDiary:"",clickedLogIn:!1,notification:[],commentNotification:[]},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.authUnRegFunc=O.a.auth().onAuthStateChanged(function(t){if(t){e.setState({user:t}),O.a.database().ref("diaries/".concat(e.state.user.uid)).on("value",function(t){var a=[];t.exists()&&(a=Object.keys(t.val()).map(function(e){var a={};return"notification"!==e&&((a=t.val()[e]).id=e),a}));e.setState({diaries:a})}),O.a.database().ref("shared/diaries").on("value",function(t){var a=[];t.exists()&&(a=Object.keys(t.val()).map(function(e){var a=t.val()[e];return a.id=e,a}),e.setState({sharedDiaries:a}))});var a=[];O.a.database().ref("diaries/".concat(e.state.user.uid)).child("CommentNotification").on("value",function(t){if(t.exists()){var n=Object.keys(t.val());a=n.map(function(e){return t.val()[e]})}e.setState({commentNotification:a})});var n=[];O.a.database().ref("diaries/".concat(e.state.user.uid)).child("notification").on("value",function(t){if(t.exists()){var a=Object.keys(t.val());n=a.map(function(e){var a=t.val()[e];return a.id=e,a})}e.setState({notification:n})})}else e.setState({user:null})})}},{key:"componentWillUnmount",value:function(){this.authUnRegFunc()}},{key:"handleSignUp",value:function(e,t,a){var n=this,r=null;this.setState({errorMessage:null}),O.a.auth().createUserWithEmailAndPassword(e,t).then(function(){(r=O.a.auth().currentUser).sendEmailVerification()}).then(function(){r.updateProfile({displayName:a})}).catch(function(e){n.setState({errorMessage:e.message})})}},{key:"handleSignIn",value:function(e,t){var a=this;this.setState({errorMessage:null}),O.a.auth().signInWithEmailAndPassword(e,t).catch(function(e){return a.setState({errorMessage:e.message})})}},{key:"handleSignOut",value:function(){var e=this;this.setState({errorMessage:null}),window.location="/",O.a.auth().signOut().catch(function(t){e.setState({errorMessage:t.message})})}},{key:"render",value:function(){var e=this,t=null;return t=this.state.user?r.a.createElement("div",null,r.a.createElement("header",{className:"App-header"},r.a.createElement("div",{className:"menuBar mt-2 ml-2"},r.a.createElement(q,{notification:this.state.notification,currentUser:this.state.user}),r.a.createElement(J,{notification:this.state.commentNotification,currentUser:this.state.user}),this.state.user&&r.a.createElement("button",{id:"logOutButton",className:"btn-lg btn",onClick:function(){return e.handleSignOut()}},r.a.createElement("i",{className:"fas fa-sign-out-alt"}))),r.a.createElement("h1",{className:"text-center",id:"title"},r.a.createElement(f.a,{to:"/",id:"titleLink"},"MiliMili")),r.a.createElement("div",{className:"text-center"})),r.a.createElement("main",{className:"navBar mt-3"},r.a.createElement(v.a,null,r.a.createElement("div",null,r.a.createElement(u.a,null,r.a.createElement("div",{className:"mx-auto"},r.a.createElement(h.a,null,r.a.createElement(p.a,null,r.a.createElement(f.a,{to:"/"},"\uc77c\uae30\uc4f0\uae30")),r.a.createElement(p.a,{className:"ml-5"},r.a.createElement(f.a,{to:"/SavedDiaries"},"\ub098\uc758 \uc77c\uae30 ")),r.a.createElement(p.a,{className:"ml-5"},r.a.createElement(f.a,{to:"/others"},"\uacf5\uc720\ub41c \uc77c\uae30"))))),r.a.createElement(y.a,null,r.a.createElement(b.a,{exact:!0,path:"/",render:function(){return r.a.createElement(H,{textUpdate:e.textUpdate})}}),r.a.createElement(b.a,{path:"/SavedDiaries",render:function(){return r.a.createElement(L,{diaries:e.state.diaries,clickUpdate:e.clickUpdate})}}),r.a.createElement(b.a,{path:"/others",render:function(){return r.a.createElement(W,{clickUpdate:e.clickUpdate,sharedDiaries:e.state.sharedDiaries})}}),r.a.createElement(b.a,{path:"/ChosenDiary/:keySeconds",render:function(t){return r.a.createElement(z,Object.assign({},t,{currentUser:e.state.user,removeMySharedDiary:e.removeMySharedDiary,notifyUser:e.notifyUser,notifyCommentUser:e.notifyCommentUser}))}}),r.a.createElement(b.a,{path:"/OwnChosenDiary/:keySeconds",render:function(t){return r.a.createElement(F,Object.assign({},t,{currentUser:e.state.user,removeDiary:e.removeDiary,shareDiary:e.shareDiary,notifyUser:e.notifyUser}))}}),r.a.createElement(g.a,{to:"/"})))))):r.a.createElement("div",{className:"container "},r.a.createElement("div",{id:"websiteTitle",style:{textAlign:"center"}},r.a.createElement("span",null,"M"),r.a.createElement("span",null,"I"),r.a.createElement("span",null,"L"),r.a.createElement("span",null,"I"),r.a.createElement("span",null,"M"),r.a.createElement("span",null,"I"),r.a.createElement("span",null,"L"),r.a.createElement("span",null,"I")),r.a.createElement("br",null),r.a.createElement(T,{signUpCallback:function(t,a,n){return e.handleSignUp(t,a,n)},signInCallback:function(t,a){return e.handleSignIn(t,a)}})),r.a.createElement("div",{className:"App"},this.state.errorMessage&&r.a.createElement("p",{className:"alert alert-danger"},this.state.errorMessage),t)}}]),t}(n.Component)),q=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(m.a)(t).call(this,e))).handleNotification=function(){for(var e=0;e<a.props.notification.length;e++)a.createNotification(a.props.notification[e])},a.state={notification:[],redirect:!1,parameter:""},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"createNotification",value:function(e){var t=this;N.a.size(e)-1>1?K.NotificationManager.info('"'.concat(e[Object.keys(e)[0]].title,'"'),"".concat(N.a.size(e)-1,"\uac1c\uc758 \ub313\uae00\uc774 \ub2ec\ub838\uc2b5\ub2c8\ub2e4!"),3e3,function(){return t.clickedNotification(e[Object.keys(e)[0]])}):K.NotificationManager.info('"'.concat(e[Object.keys(e)[0]].title,'"'),"\ub313\uae00\uc774 \ub2ec\ub838\uc2b5\ub2c8\ub2e4! \ud074\ub9ad\ud574\uc11c \ud655\uc778",3e3,function(){return t.clickedNotification(e[Object.keys(e)[0]])})}},{key:"clickedNotification",value:function(e){O.a.database().ref("diaries/".concat(this.props.currentUser.uid)).child("notification").child(e.diaryKey).remove(),this.setState({redirect:!0,parameter:e.diaryKey})}},{key:"render",value:function(){return this.state.redirect&&!window.location.href.includes(this.state.parameter)?r.a.createElement(g.a,{push:!0,to:{pathname:"/ChosenDiary/"+this.state.parameter}}):(this.state.redirect&&window.location.href.includes(this.state.parameter)&&window.location.reload(),r.a.createElement("div",{className:"containerNotification"},r.a.createElement("div",{className:"ml-2 mt-2"},r.a.createElement("button",{id:"notifyButton",style:{borderRadius:200},className:"btn-lg btn",onClick:this.handleNotification},r.a.createElement("i",{className:"fas fa-comment"}," ",r.a.createElement("span",{id:"num"},this.props.notification.length)," ")),r.a.createElement(K.NotificationContainer,null))))}}]),t}(n.Component),J=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(m.a)(t).call(this,e))).handleNotification=function(){for(var e=0;e<a.props.notification.length;e++)a.createNotification(a.props.notification[e])},a.state={notification:[],redirect:!1,parameter:""},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"createNotification",value:function(e){var t=this;console.log(e[Object.keys(e)[0]]),K.NotificationManager.info("\ub313\uae00\uc744 \ub2e8 \uac8c\uc2dc\ubb3c\uc5d0\uc11c \ub610\ub2e4\ub978 \ub313\uae00\uc774 \ub2ec\ub838\uc2b5\ub2c8\ub2e4!","\ud074\ub9ad\ud574\uc11c \ud655\uc778\ud574\uc8fc\uc138\uc694!",3e3,function(){return t.clickedNotification(e[Object.keys(e)[0]])})}},{key:"clickedNotification",value:function(e){console.log(e),O.a.database().ref("diaries/".concat(this.props.currentUser.uid)).child("CommentNotification").child(e).remove(),this.setState({redirect:!0,parameter:e})}},{key:"render",value:function(){return console.log(this.props.notification),this.state.redirect&&!window.location.href.includes(this.state.parameter)?r.a.createElement(g.a,{push:!0,to:{pathname:"/ChosenDiary/"+this.state.parameter}}):(this.state.redirect&&window.location.href.includes(this.state.parameter)&&window.location.reload(),r.a.createElement("div",{className:"containerNotification"},r.a.createElement("div",{className:"ml-2 mt-2"},r.a.createElement("button",{id:"notifyButton",style:{borderRadius:200},className:"btn-lg btn",onClick:this.handleNotification},r.a.createElement("i",{className:"fas fa-comments"}," ",r.a.createElement("span",{id:"num"},this.props.notification.length)," ")),r.a.createElement(K.NotificationContainer,null))))}}]),t}(n.Component),X=P;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(105);O.a.initializeApp({apiKey:"AIzaSyAqNUmu2ow3XO491XWCBqNAopN5_ZoKwyQ",authDomain:"milistory.firebaseapp.com",databaseURL:"https://milistory.firebaseio.com",projectId:"milistory",storageBucket:"milistory.appspot.com",messagingSenderId:"866875892813"}),s.a.render(r.a.createElement(v.a,null,r.a.createElement(X,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},22:function(e,t,a){},53:function(e,t,a){e.exports=a(107)},58:function(e,t,a){},63:function(e,t,a){}},[[53,2,1]]]);
//# sourceMappingURL=main.85d7d679.chunk.js.map