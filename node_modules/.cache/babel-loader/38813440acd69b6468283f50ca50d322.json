{"ast":null,"code":"import _classCallCheck from \"/Users/PhilipChoi/Desktop/milimili/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/PhilipChoi/Desktop/milimili/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/PhilipChoi/Desktop/milimili/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/PhilipChoi/Desktop/milimili/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/PhilipChoi/Desktop/milimili/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/PhilipChoi/Desktop/milimili/src/App.js\";\nimport React, { Component } from 'react';\nimport './App.css';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { Navbar, NavItem, Nav } from 'reactstrap';\nimport { HashRouter, Route, Switch, Link, Redirect } from 'react-router-dom';\nimport { TagCloud } from \"react-tagcloud\";\nimport _ from 'lodash';\nimport firebase from 'firebase/app';\nimport 'firebase/database';\nimport SignUpForm from './SignUpForm';\nimport ChosenDiary from './ChosenDiary';\nimport SavedDiaries from './SavedDiaries';\nimport WriteDiary from './WriteDiary'; // import { forEach } from '@firebase/util';\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App(props) {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this, props));\n\n    _this.textUpdate = function (diary, date, title) {\n      // let copiedDiaries = [];\n      // let copiedDiaries = this.state.diaries;\n      console.log(_this.state.user);\n      var currentUser = _this.state.user;\n      var newData = {\n        userID: currentUser.uid,\n        time: firebase.database.ServerValue.TIMESTAMP,\n        diary: diary,\n        title: title,\n        date: date // copiedDiaries.push(newData);\n\n      };\n      var diariesRef = firebase.database().ref(\"diaries/\".concat(currentUser.uid));\n      console.log(newData);\n      diariesRef.push(newData); // diariesRef.on(\"value\", (snapshot) => {\n      //   this.setState({diaries: snapshot.val()})\n      // })\n      // firebase.database().ref(`test/${currentUser.uid}/diaries`).child(date).set(newData)\n      // console.log(firebase.database().ref(`text/${currentUser.uid}/diaries`).child(date))\n      // this.setState({ diaries: copiedDiaries });\n    };\n\n    _this.shareDiary = function (diary) {\n      console.log(diary); // let currentUser = this.state.user;\n      // let data = {\n      //   userID: currentUser.uid,\n      //   time: firebase.database.ServerValue.TIMESTAMP, diary: diary.diary,\n      //   title: diary.value, date: diary.key\n      // }\n\n      var shared = false;\n      firebase.database().ref('shared/diaries').on(\"value\", function (snapshot) {\n        // for (let key in snapshot.val()) {\n        //   if(snapshot.val()[key].date === diary.key && snapshot.val()[key].userID === diary.userID){\n        //     shared = true;\n        //   }\n        // }\n        //if shared diary exists already\n        for (var key in snapshot.val()) {\n          if (snapshot.val()[diary.id] === snapshot.val()[key]) {\n            shared = true;\n          }\n        }\n      });\n      console.log(diary); //title: diary.value\n\n      if (shared === false) {\n        // firebase.database().ref(`shared/diaries/`).child(diary.userID +'-'+diary.key).set(data)\n        firebase.database().ref(\"shared/diaries/\").child(diary.id).set(diary); // let newArray = this.state.sharedDiaries\n        // firebase.database().ref(`shared/diaries/`).on(\"value\", (snapshot) => {\n        //   newArray.push(diary)\n        //   this.setState({sharedDiaries: newArray})\n        // })\n      } else {\n        alert(\"이미 공유하신 게시물입니다!\");\n      }\n    };\n\n    _this.removeMySharedDiary = function (id) {\n      console.log(\"sharedremove:\");\n      console.log(id); // console.log(date)\n      // firebase.database().ref(`shared/diaries`).on(\"value\", (snapshot) => {\n      //   for(let key in snapshot.val()){\n      //     if(snapshot.val()[key].date === date && snapshot.val()[key].userID === userID){\n      //       console.log(\"key:\")\n      //       console.log(key);\n      //       firebase.database().ref(`shared/diaries`).child(key).remove()\n      //     } \n      //   }\n      // })\n\n      firebase.database().ref(\"shared/diaries\").child(id).remove();\n    };\n\n    _this.removeDiary = function (id) {\n      // let copiedDiaries = this.state.diaries;\n      // _.remove(copiedDiaries, (diary) => {\n      //   return diary.id === id\n      // })\n      var diariesRef = firebase.database().ref(\"diaries/\".concat(_this.state.user.uid));\n      diariesRef.child(id).remove(); // diariesRef.child(id).on(\"value\", (snapshot) => {\n      //   this.setState({diaries: snapshot.val()})\n      // })\n      // console.log(copiedDiaries)\n      // this.setState({ diaries: copiedDiaries })\n    };\n\n    _this.clickUpdate = function (diary) {\n      // console.log(diary.value)\n      _this.setState({\n        clickedDiary: diary\n      }); // console.log(this.state.clickedDiary.value)\n\n    };\n\n    _this.clickLogIn = function () {\n      _this.setState({\n        clickedLogIn: true\n      });\n    };\n\n    _this.state = {\n      diaries: [],\n      sharedDiaries: [],\n      clickedDiary: '',\n      clickedLogIn: false\n    };\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this.authUnRegFunc = firebase.auth().onAuthStateChanged(function (firebaseUser) {\n        if (firebaseUser) {\n          _this2.setState({\n            user: firebaseUser\n          }); //setting state for my private diaries\n\n\n          firebase.database().ref(\"diaries/\".concat(_this2.state.user.uid)).on(\"value\", function (snapshot) {\n            console.log(\"posted\");\n            console.log(snapshot.val()); // let newArray = [];\n            // for (let key in snapshot.val()) {\n            //   newArray.push(snapshot.val()[key])\n            // }\n            // console.log(\"snapshot:\")\n            // console.log(newArray)\n            // this.setState({ diaries: newArray })\n\n            var diariesObject = [];\n\n            if (snapshot.exists()) {\n              var diariesKeys = Object.keys(snapshot.val()); // console.log(chirpsKeys);\n\n              console.log(snapshot.val());\n              diariesObject = diariesKeys.map(function (key) {\n                var diariesObj = snapshot.val()[key];\n                console.log(key);\n                diariesObj.id = key;\n                return diariesObj;\n              });\n            }\n\n            _this2.setState({\n              diaries: diariesObject\n            });\n          }); //setting state for my shared diaries\n\n          firebase.database().ref(\"shared/diaries\").on(\"value\", function (snapshot) {\n            var sharedObject = [];\n\n            if (snapshot.exists()) {\n              var sharedKeys = Object.keys(snapshot.val()); // console.log(chirpsKeys);\n\n              sharedObject = sharedKeys.map(function (key) {\n                var sharedObj = snapshot.val()[key];\n                sharedObj.id = key;\n                return sharedObj;\n              });\n\n              _this2.setState({\n                sharedDiaries: sharedObject\n              });\n            }\n          });\n        } else {\n          _this2.setState({\n            user: null\n          });\n        }\n      });\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.authUnRegFunc();\n    }\n  }, {\n    key: \"handleSignUp\",\n    value: function handleSignUp(email, password, handle) {\n      var _this3 = this;\n\n      console.log(email, password); // this.setState({ errorMessage: null }); //clear any old errors\n      // firebase.auth().createUserWithEmailAndPassword(email, password)\n      //   .then((user) => {\n      //     user.updateProfile({\n      //       displayName: handle,\n      //       photoURL: avatar\n      //     }).then((profile) => {\n      //       return profile;\n      //     }).catch((error) => {\n      //       this.setState({ errorMessage: error.message })\n      //       // console.log(this.state.errorMessage)\n      //       // Alert your error to your user \n      //     })\n      //   }).catch((error) => {\n      //     // Alert your error to your user\n      //     this.setState({ errorMessage: error.message })\n      //   });\n\n      this.setState({\n        errorMessage: null\n      });\n      firebase.auth().createUserWithEmailAndPassword(email, password).then(function (user) {\n        user.updateProfile({\n          type: handle\n        }).then(function (profile) {\n          return profile;\n        });\n      }).catch(function (err) {\n        _this3.setState({\n          errorMessage: err.message\n        });\n      });\n      console.log(this.state.user);\n      /* TODO: sign up user here */\n    }\n  }, {\n    key: \"handleSignIn\",\n    value: function handleSignIn(email, password) {\n      var _this4 = this;\n\n      // window.location.reload();\n      this.setState({\n        errorMessage: null\n      });\n      firebase.auth().signInWithEmailAndPassword(email, password).catch(function (error) {\n        return _this4.setState({\n          errorMessage: error.message\n        });\n      });\n    } //A callback function for logging out the current user\n\n  }, {\n    key: \"handleSignOut\",\n    value: function handleSignOut() {\n      var _this5 = this;\n\n      this.setState({\n        errorMessage: null\n      }); //clear any old errors\n\n      window.location = '/';\n      firebase.auth().signOut().catch(function (error) {\n        _this5.setState({\n          errorMessage: error.message\n        });\n      });\n      /* TODO: sign out user here */\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this6 = this;\n\n      var content = null; //content to render\n\n      if (!this.state.user) {\n        //if logged out, show signup form\n        content = React.createElement(\"div\", {\n          className: \"container mt-5\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 246\n          },\n          __self: this\n        }, React.createElement(\"h1\", {\n          style: {\n            textAlign: 'center',\n            color: '#6F6B29'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 247\n          },\n          __self: this\n        }, \"MiliMili\"), React.createElement(\"div\", {\n          className: \"row mt-5\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 248\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"col-sm-12 col-md-6 offset-md-3 shadow-sm mt-4\",\n          id: \"signupBox\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 249\n          },\n          __self: this\n        }, React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 251\n          },\n          __self: this\n        }), React.createElement(SignUpForm, {\n          signUpCallback: function signUpCallback(email, password) {\n            return _this6.handleSignUp(email, password);\n          },\n          signInCallback: function signInCallback(email, password) {\n            return _this6.handleSignIn(email, password);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 252\n          },\n          __self: this\n        }))));\n      } else {\n        content = React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 262\n          },\n          __self: this\n        }, React.createElement(\"header\", {\n          className: \"App-header\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 263\n          },\n          __self: this\n        }, React.createElement(\"h1\", {\n          className: \"text-center\",\n          id: \"title\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 264\n          },\n          __self: this\n        }, React.createElement(Link, {\n          to: \"/\",\n          id: \"titleLink\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 264\n          },\n          __self: this\n        }, \"MiliMili\")), React.createElement(\"div\", {\n          className: \"text-center\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 268\n          },\n          __self: this\n        }, this.state.user && React.createElement(\"button\", {\n          className: \"btn\",\n          onClick: function onClick() {\n            return _this6.handleSignOut();\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 272\n          },\n          __self: this\n        }, \"\\uB85C\\uADF8\\uC544\\uC6C3\"))), React.createElement(\"main\", {\n          className: \"navBar mt-3\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 278\n          },\n          __self: this\n        }, React.createElement(HashRouter, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 279\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 280\n          },\n          __self: this\n        }, React.createElement(Navbar, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 281\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"mx-auto\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 282\n          },\n          __self: this\n        }, React.createElement(Nav, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 283\n          },\n          __self: this\n        }, React.createElement(NavItem, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 284\n          },\n          __self: this\n        }, React.createElement(Link, {\n          to: '/',\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 284\n          },\n          __self: this\n        }, \"\\uC77C\\uAE30\\uC4F0\\uAE30\")), React.createElement(NavItem, {\n          className: \"ml-5\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 286\n          },\n          __self: this\n        }, React.createElement(Link, {\n          to: '/SavedDiaries',\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 286\n          },\n          __self: this\n        }, \"\\uB098\\uC758 \\uC77C\\uAE30 \")), React.createElement(NavItem, {\n          className: \"ml-5\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 288\n          },\n          __self: this\n        }, React.createElement(Link, {\n          to: '/others',\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 288\n          },\n          __self: this\n        }, \"\\uACF5\\uC720\\uB41C \\uC77C\\uAE30\"))))), React.createElement(Switch, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 292\n          },\n          __self: this\n        }, React.createElement(Route, {\n          exact: true,\n          path: \"/\",\n          render: function render() {\n            return React.createElement(WriteDiary, {\n              textUpdate: _this6.textUpdate,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 293\n              },\n              __self: this\n            });\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 293\n          },\n          __self: this\n        }), console.log(\"state diaries\"), console.log(this.state.diaries), React.createElement(Route, {\n          path: \"/SavedDiaries\",\n          render: function render() {\n            return React.createElement(SavedDiaries, {\n              diaries: _this6.state.diaries,\n              clickUpdate: _this6.clickUpdate,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 298\n              },\n              __self: this\n            });\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 298\n          },\n          __self: this\n        }), React.createElement(Route, {\n          path: \"/others\",\n          render: function render() {\n            return React.createElement(OthersDiaries, {\n              clickUpdate: _this6.clickUpdate,\n              sharedDiaries: _this6.state.sharedDiaries,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 299\n              },\n              __self: this\n            });\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 299\n          },\n          __self: this\n        }), React.createElement(Route, {\n          path: \"/ChosenDiary/:keySeconds\",\n          render: function render() {\n            return React.createElement(ChosenDiary, {\n              diary: _this6.state.clickedDiary,\n              currentUser: _this6.state.user,\n              removeDiary: _this6.removeDiary,\n              shareDiary: _this6.shareDiary,\n              removeMySharedDiary: _this6.removeMySharedDiary,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 300\n              },\n              __self: this\n            });\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 300\n          },\n          __self: this\n        }), React.createElement(Redirect, {\n          to: \"/\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 302\n          },\n          __self: this\n        }))))));\n      }\n\n      return React.createElement(\"div\", {\n        className: \"App\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 312\n        },\n        __self: this\n      }, this.state.errorMessage && React.createElement(\"p\", {\n        className: \"alert alert-danger\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 314\n        },\n        __self: this\n      }, this.state.errorMessage), content);\n    }\n  }]);\n\n  return App;\n}(Component);\n\nvar OthersDiaries =\n/*#__PURE__*/\nfunction (_Component2) {\n  _inherits(OthersDiaries, _Component2);\n\n  function OthersDiaries(props) {\n    var _this7;\n\n    _classCallCheck(this, OthersDiaries);\n\n    _this7 = _possibleConstructorReturn(this, _getPrototypeOf(OthersDiaries).call(this, props));\n    _this7.state = {\n      redirect: false,\n      clickedDiary: ''\n    };\n    return _this7;\n  }\n\n  _createClass(OthersDiaries, [{\n    key: \"handleClick\",\n    value: function handleClick(tag) {\n      console.log(tag.value);\n      this.props.clickUpdate(tag);\n      this.setState({\n        redirect: true,\n        clickedDiary: tag\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this8 = this;\n\n      if (this.state.redirect) {\n        // return <Redirect push to={'/ChosenDiary/' + this.state.clickedDiary.key}/>\n        return React.createElement(Redirect, {\n          push: true,\n          to: {\n            pathname: '/ChosenDiary/' + this.state.clickedDiary.key\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 340\n          },\n          __self: this\n        });\n      } // console.log(firebase.database().ref('test/').length());\n      // let newArray = [];\n      // firebase.database().ref('shared/diaries').on(\"value\", (snapshot) => {\n      //   for (let key in snapshot.val()) {\n      //     newArray.push(snapshot.val()[key])\n      //   }\n      // })\n\n\n      var data = [];\n      console.log(this.props.sharedDiaries);\n\n      if (typeof this.props.sharedDiaries !== 'undefined') {\n        data = this.props.sharedDiaries.map(function (diary) {\n          return {\n            value: diary.value,\n            count: Math.random() * 20,\n            diary: diary.diary,\n            date: diary.date,\n            key: diary.id,\n            userID: diary.userID,\n            shared: true,\n            id: diary.id\n          };\n        });\n      } // console.log(\"sharedDiares in Component\");\n\n\n      console.log(data);\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 365\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"container mt-4\",\n        id: \"wordCloud\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 366\n        },\n        __self: this\n      }, React.createElement(TagCloud, {\n        className: \"text-center\",\n        id: \"tagCloud\",\n        minSize: 30,\n        maxSize: 60,\n        tags: data,\n        onClick: function onClick(tag) {\n          return _this8.handleClick(tag);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 367\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return OthersDiaries;\n}(Component);\n\nexport default App;","map":{"version":3,"sources":["/Users/PhilipChoi/Desktop/milimili/src/App.js"],"names":["React","Component","Navbar","NavItem","Nav","HashRouter","Route","Switch","Link","Redirect","TagCloud","_","firebase","SignUpForm","ChosenDiary","SavedDiaries","WriteDiary","App","props","textUpdate","diary","date","title","console","log","state","user","currentUser","newData","userID","uid","time","database","ServerValue","TIMESTAMP","diariesRef","ref","push","shareDiary","shared","on","snapshot","key","val","id","child","set","alert","removeMySharedDiary","remove","removeDiary","clickUpdate","setState","clickedDiary","clickLogIn","clickedLogIn","diaries","sharedDiaries","authUnRegFunc","auth","onAuthStateChanged","firebaseUser","diariesObject","exists","diariesKeys","Object","keys","map","diariesObj","sharedObject","sharedKeys","sharedObj","email","password","handle","errorMessage","createUserWithEmailAndPassword","then","updateProfile","type","profile","catch","err","message","signInWithEmailAndPassword","error","window","location","signOut","content","textAlign","color","handleSignUp","handleSignIn","handleSignOut","OthersDiaries","redirect","tag","value","pathname","data","count","Math","random","handleClick"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './App.css';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { Navbar, NavItem, Nav } from 'reactstrap'\nimport { HashRouter, Route, Switch, Link, Redirect } from 'react-router-dom';\nimport { TagCloud } from \"react-tagcloud\";\nimport _ from 'lodash';\nimport firebase from 'firebase/app';\nimport 'firebase/database';\nimport SignUpForm from './SignUpForm';\nimport ChosenDiary from './ChosenDiary'\nimport SavedDiaries from './SavedDiaries'\nimport WriteDiary from './WriteDiary'\n// import { forEach } from '@firebase/util';\n\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      diaries: [],\n      sharedDiaries: [],\n      clickedDiary: '',\n      clickedLogIn: false,\n    }\n  }\n  textUpdate = (diary, date, title) => {\n    // let copiedDiaries = [];\n    // let copiedDiaries = this.state.diaries;\n    console.log(this.state.user)\n    let currentUser = this.state.user;\n    let newData = {\n      userID: currentUser.uid,\n      time: firebase.database.ServerValue.TIMESTAMP, diary: diary,\n      title: title, date: date\n    }\n    // copiedDiaries.push(newData);\n    let diariesRef = firebase.database().ref(`diaries/${currentUser.uid}`)\n    console.log(newData);\n    diariesRef.push(newData);\n    \n    // diariesRef.on(\"value\", (snapshot) => {\n    //   this.setState({diaries: snapshot.val()})\n    // })\n    // firebase.database().ref(`test/${currentUser.uid}/diaries`).child(date).set(newData)\n\n    // console.log(firebase.database().ref(`text/${currentUser.uid}/diaries`).child(date))\n    // this.setState({ diaries: copiedDiaries });\n  }\n\n  shareDiary = (diary) => {\n    console.log(diary)\n    // let currentUser = this.state.user;\n    // let data = {\n    //   userID: currentUser.uid,\n    //   time: firebase.database.ServerValue.TIMESTAMP, diary: diary.diary,\n    //   title: diary.value, date: diary.key\n    // }\n    let shared = false\n    firebase.database().ref('shared/diaries').on(\"value\", (snapshot) => {\n      // for (let key in snapshot.val()) {\n      //   if(snapshot.val()[key].date === diary.key && snapshot.val()[key].userID === diary.userID){\n      //     shared = true;\n      //   }\n      // }\n      //if shared diary exists already\n      for (let key in snapshot.val()) {\n      if (snapshot.val()[diary.id] === snapshot.val()[key]) {\n        shared = true;\n      }\n    }\n    })\n    console.log(diary)\n    //title: diary.value\n    if (shared === false) {\n      // firebase.database().ref(`shared/diaries/`).child(diary.userID +'-'+diary.key).set(data)\n      firebase.database().ref(`shared/diaries/`).child(diary.id).set(diary)\n      // let newArray = this.state.sharedDiaries\n      // firebase.database().ref(`shared/diaries/`).on(\"value\", (snapshot) => {\n      //   newArray.push(diary)\n      //   this.setState({sharedDiaries: newArray})\n      // })\n    } else {\n      alert(\"이미 공유하신 게시물입니다!\")\n    }\n  }\n\n  removeMySharedDiary = (id) => {\n    console.log(\"sharedremove:\")\n    console.log(id)\n    // console.log(date)\n    // firebase.database().ref(`shared/diaries`).on(\"value\", (snapshot) => {\n    //   for(let key in snapshot.val()){\n    //     if(snapshot.val()[key].date === date && snapshot.val()[key].userID === userID){\n    //       console.log(\"key:\")\n    //       console.log(key);\n    //       firebase.database().ref(`shared/diaries`).child(key).remove()\n    //     } \n    //   }\n    // })\n\n    firebase.database().ref(`shared/diaries`).child(id).remove()\n  }\n\n  removeDiary = (id) => {\n    // let copiedDiaries = this.state.diaries;\n    // _.remove(copiedDiaries, (diary) => {\n    //   return diary.id === id\n    // })\n\n    let diariesRef = firebase.database().ref(`diaries/${this.state.user.uid}`)\n    diariesRef.child(id).remove();\n\n    // diariesRef.child(id).on(\"value\", (snapshot) => {\n    //   this.setState({diaries: snapshot.val()})\n    // })\n    // console.log(copiedDiaries)\n    // this.setState({ diaries: copiedDiaries })\n  }\n\n  clickUpdate = (diary) => {\n    // console.log(diary.value)\n    this.setState({ clickedDiary: diary })\n    // console.log(this.state.clickedDiary.value)\n  }\n  clickLogIn = () => {\n    this.setState({ clickedLogIn: true })\n  }\n\n  componentDidMount() {\n    this.authUnRegFunc = firebase.auth().onAuthStateChanged((firebaseUser) => {\n      if (firebaseUser) {\n        this.setState({\n          user: firebaseUser,\n        })\n        //setting state for my private diaries\n        firebase.database().ref(`diaries/${this.state.user.uid}`).on(\"value\", (snapshot) => {\n          console.log(\"posted\");\n          console.log(snapshot.val())\n          // let newArray = [];\n          // for (let key in snapshot.val()) {\n          //   newArray.push(snapshot.val()[key])\n          // }\n          // console.log(\"snapshot:\")\n          // console.log(newArray)\n          // this.setState({ diaries: newArray })\n          let diariesObject = [];\n          if (snapshot.exists()) {\n            let diariesKeys = Object.keys(snapshot.val())\n            // console.log(chirpsKeys);\n            console.log(snapshot.val())\n            diariesObject = diariesKeys.map((key) => {\n              let diariesObj = snapshot.val()[key];\n              console.log(key)\n              diariesObj.id = key;\n              return diariesObj;\n            })\n          }\n\n          this.setState({ diaries: diariesObject })\n        })\n        //setting state for my shared diaries\n\n\n        firebase.database().ref(`shared/diaries`).on(\"value\", (snapshot) => {\n          let sharedObject = [];\n          if (snapshot.exists()) {\n            let sharedKeys = Object.keys(snapshot.val())\n            // console.log(chirpsKeys);\n            sharedObject = sharedKeys.map((key) => {\n              let sharedObj = snapshot.val()[key];\n              sharedObj.id = key;\n              return sharedObj;\n            })\n            this.setState({ sharedDiaries: sharedObject })\n          }\n        })\n      } else {\n        this.setState({ user: null })\n      }\n    })\n  }\n\n  componentWillUnmount() {\n    this.authUnRegFunc();\n  }\n\n  handleSignUp(email, password, handle) {\n    console.log(email, password)\n    // this.setState({ errorMessage: null }); //clear any old errors\n    // firebase.auth().createUserWithEmailAndPassword(email, password)\n    //   .then((user) => {\n    //     user.updateProfile({\n    //       displayName: handle,\n    //       photoURL: avatar\n    //     }).then((profile) => {\n    //       return profile;\n    //     }).catch((error) => {\n    //       this.setState({ errorMessage: error.message })\n    //       // console.log(this.state.errorMessage)\n    //       // Alert your error to your user \n    //     })\n    //   }).catch((error) => {\n    //     // Alert your error to your user\n    //     this.setState({ errorMessage: error.message })\n    //   });\n    this.setState({ errorMessage: null });\n    firebase.auth().createUserWithEmailAndPassword(email, password)\n      .then((user) => {\n        user.updateProfile({\n          type: handle\n        }).then( (profile) => {\n          return profile\n        })\n      }).catch((err) => {\n        this.setState({ errorMessage: err.message });\n      })\n      console.log(this.state.user)\n    /* TODO: sign up user here */\n  }\n\n  handleSignIn(email, password) {\n    // window.location.reload();\n    this.setState({ errorMessage: null });\n    firebase.auth().signInWithEmailAndPassword(email, password)\n      .catch(error => this.setState({ errorMessage: error.message })\n      );\n  }\n\n  //A callback function for logging out the current user\n  handleSignOut() {\n    this.setState({ errorMessage: null }); //clear any old errors\n    window.location = '/';\n    firebase.auth().signOut()\n      .catch(error => {\n        this.setState({ errorMessage: error.message })\n      })\n    /* TODO: sign out user here */\n  }\n\n\n  render() {\n    let content = null; //content to render\n    if (!this.state.user) { //if logged out, show signup form\n      content = (\n        <div className=\"container mt-5\">\n          <h1 style={{ textAlign: 'center', color: '#6F6B29' }}>MiliMili</h1>\n          <div className=\"row mt-5\">\n            <div className=\"col-sm-12 col-md-6 offset-md-3 shadow-sm mt-4\" id=\"signupBox\">\n              {/* <img src=\"img/fruit.png\" alt=\"brand logo\" className=\"brandLogoBig mx-auto d-block\" style={{ width: 50, height: 50 }} /> */}\n              <br />\n              <SignUpForm\n                signUpCallback={(email, password) => this.handleSignUp(email, password)}\n                signInCallback={(email, password) => this.handleSignIn(email, password)}\n              />\n            </div>\n          </div>\n        </div>\n      );\n    } else {\n      content = (\n        <div>\n          <header className=\"App-header\">\n            <h1 className=\"text-center\" id=\"title\"><Link to=\"/\" id=\"titleLink\">\n              MiliMili\n            </Link>\n            </h1>\n            <div className=\"text-center\">\n              {/* <button className=\"btn ml\" onClick={this.clickLogIn}>\n                  로그인\n            </button> */}\n              {this.state.user && <button className=\"btn\" onClick={() => this.handleSignOut()}>\n                로그아웃\n            </button>}\n            </div>\n          </header>\n\n          <main className=\"navBar mt-3\">\n            <HashRouter>\n              <div>\n                <Navbar>\n                  <div className=\"mx-auto\">\n                    <Nav>\n                      <NavItem><Link to={'/'}>일기쓰기</Link>\n                      </NavItem>\n                      <NavItem className=\"ml-5\"><Link to={'/SavedDiaries'}>나의 일기 </Link>\n                      </NavItem>\n                      <NavItem className=\"ml-5\"><Link to={'/others'}>공유된 일기</Link></NavItem>\n                    </Nav>\n                  </div>\n                </Navbar>\n                <Switch>\n                  <Route exact path='/' render={() => <WriteDiary textUpdate={this.textUpdate} />} />\n                  {console.log(\"state diaries\")}\n\n                  {console.log(this.state.diaries)}\n                  {/* <IndexRoute render={() => <SavedDiaries diaries={this.state.diaries} clickUpdate={this.clickUpdate} />}/> */}\n                  <Route path='/SavedDiaries' render={() => <SavedDiaries diaries={this.state.diaries} clickUpdate={this.clickUpdate} />} />\n                  <Route path='/others' render={() => <OthersDiaries clickUpdate={this.clickUpdate} sharedDiaries={this.state.sharedDiaries} />} />\n                  <Route path='/ChosenDiary/:keySeconds' render={() => <ChosenDiary diary={this.state.clickedDiary} currentUser={this.state.user}\n                    removeDiary={this.removeDiary} shareDiary={this.shareDiary} removeMySharedDiary={this.removeMySharedDiary} />} />\n                  <Redirect to='/' />\n                </Switch>\n              </div>\n            </HashRouter>\n          </main>\n        </div>\n      );\n\n    }\n    return (\n      <div className=\"App\">\n        {this.state.errorMessage &&\n          <p className=\"alert alert-danger\">{this.state.errorMessage}</p>\n        }\n        {content}\n      </div>\n\n    );\n  }\n}\n\nclass OthersDiaries extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      redirect: false,\n      clickedDiary: '',\n    }\n  }\n\n  handleClick(tag) {\n    console.log(tag.value)\n    this.props.clickUpdate(tag);\n    this.setState({ redirect: true, clickedDiary: tag })\n  }\n  render() {\n    if (this.state.redirect) {\n      // return <Redirect push to={'/ChosenDiary/' + this.state.clickedDiary.key}/>\n      return <Redirect push to={{\n        pathname: '/ChosenDiary/' + this.state.clickedDiary.key\n      }} />\n    }\n    // console.log(firebase.database().ref('test/').length());\n\n    // let newArray = [];\n    // firebase.database().ref('shared/diaries').on(\"value\", (snapshot) => {\n    //   for (let key in snapshot.val()) {\n    //     newArray.push(snapshot.val()[key])\n    //   }\n    // })\n    let data = [];\n    console.log(this.props.sharedDiaries)\n    if (typeof (this.props.sharedDiaries) !== 'undefined') {\n      data = this.props.sharedDiaries.map((diary) => {\n        return ({\n          value: diary.value, count: Math.random() * 20, diary: diary.diary, date: diary.date,\n          key: diary.id, userID: diary.userID, shared: true, id: diary.id\n        });\n      })\n    }\n    // console.log(\"sharedDiares in Component\");\n    console.log(data);\n    return (\n      <div>\n        < div className=\"container mt-4\" id=\"wordCloud\">\n          <TagCloud className=\"text-center\" id=\"tagCloud\" minSize={30}\n            maxSize={60}\n            tags={data}\n            onClick={(tag) => this.handleClick(tag)}\n          />\n        </div>\n      </div >\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}